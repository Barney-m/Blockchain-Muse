{"remainingRequest":"C:\\Users\\kensh\\Documents\\GitHub\\muse-dapp\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\kensh\\Documents\\GitHub\\muse-dapp\\frontend\\src\\view\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\kensh\\Documents\\GitHub\\muse-dapp\\frontend\\src\\view\\Home.vue","mtime":1606824168758},{"path":"C:\\Users\\kensh\\Documents\\GitHub\\muse-dapp\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\kensh\\Documents\\GitHub\\muse-dapp\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\kensh\\Documents\\GitHub\\muse-dapp\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\kensh\\Documents\\GitHub\\muse-dapp\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTb25nTGlzdCBmcm9tICJAL2NvbXBvbmVudHMvU29uZ0xpc3QiOwppbXBvcnQgQWRkU29uZ0Zvcm0gZnJvbSAiQC9jb21wb25lbnRzL0FkZFNvbmdGb3JtIjsKaW1wb3J0IHsgdXRpbHMgfSBmcm9tICJAL21peGlucy91dGlscyI7CgpleHBvcnQgZGVmYXVsdCB7Cgljb21wb25lbnRzOiB7CgkJU29uZ0xpc3QsCgkJQWRkU29uZ0Zvcm0KCX0sCgoJbWl4aW5zOiBbdXRpbHNdLAoKCWRhdGEoKSB7CgkJcmV0dXJuIHsKCQkJc29uZ3M6IFtdLAoJCQlzb25nQ291bnQ6IDAKCQl9OwoJfSwKCglhc3luYyBjcmVhdGVkKCkgewoJCWF3YWl0IFByb21pc2UuYWxsKFt0aGlzLmdldEFsbFNvbmdzKCksIHRoaXMuZ2V0U29uZ0NvdW50KCldKTsKCX0sCgoJbWV0aG9kczogewoJCWFzeW5jIGdldEFsbFNvbmdzKCkgewoJCQl0cnkgewoJCQkJY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy4kY29udHJhY3QuZ2V0QWxsU29uZ3MoKTsKCgkJCQl0aGlzLnNvbmdzID0gcmVzdWx0Lm1hcCgoc29uZykgPT4gewoJCQkJCXJldHVybiB7CgkJCQkJCXRpdGxlOiBzb25nLnRpdGxlLAoJCQkJCQlhdXRob3I6IHNvbmcuYXV0aG9yLAoJCQkJCQljYXRlZ29yeTogc29uZy5jYXRlZ29yeSwKCQkJCQkJaXNtbjogc29uZy5pc21uLAoJCQkJCQlhdmFpbGFibGU6IHNvbmcuYXZhaWxhYmxlCgkJCQkJfTsKCQkJCX0pOwoJCQl9IGNhdGNoIChlcnJvcikgewoJCQkJdGhpcy5oYW5kbGUoZXJyb3IpOwoJCQl9CgkJfSwKCgkJYXN5bmMgZ2V0U29uZ0NvdW50KCkgewoJCQl0aGlzLnNvbmdDb3VudCA9IGF3YWl0IHRoaXMuJGNvbnRyYWN0LmdldFNvbmdDb3VudCgpOwoJCX0sCgoJCXVwZGF0ZVNvbmdMaXN0KGV2ZW50KSB7CgkJCXN3aXRjaCAoZXZlbnQubmFtZSkgewoJCQkJY2FzZSAib25BZGRTb25nIjogewoJCQkJCXRoaXMuc29uZ3MucHVzaChldmVudC5kYXRhKTsKCQkJCQl0aGlzLnNvbmdDb3VudCsrOwoJCQkJCWJyZWFrOwoJCQkJfQoJCQkJY2FzZSAib25Jc3N1ZVNvbmciOiB7CgkJCQkJY29uc3Qgc29uZ0lkeCA9IHRoaXMuZmluZFNvbmdJbmRleChldmVudC5kYXRhKTsKCQkJCQl0aGlzLnNvbmdzW3NvbmdJZHhdLmF2YWlsYWJsZSA9IGZhbHNlOwoJCQkJCWJyZWFrOwoJCQkJfQoJCQkJY2FzZSAib25SZXR1cm5Tb25nIjogewoJCQkJCWNvbnN0IHNvbmdJZHggPSB0aGlzLmZpbmRTb25nSW5kZXgoZXZlbnQuZGF0YSk7CgkJCQkJdGhpcy5zb25nc1tzb25nSWR4XS5hdmFpbGFibGUgPSB0cnVlOwoJCQkJCWJyZWFrOwoJCQkJfQoJCQkJY2FzZSAib25EZWxldGVTb25nIjogewoJCQkJCWNvbnN0IHNvbmdJZHggPSB0aGlzLmZpbmRTb25nSW5kZXgoZXZlbnQuZGF0YSk7CgkJCQkJdGhpcy5zb25ncy5zcGxpY2Uoc29uZ0lkeCwgMSk7CgkJCQkJdGhpcy5zb25nQ291bnQtLTsKCQkJCQlicmVhazsKCQkJCX0KCQkJfQoJCX0sCgoJCWZpbmRTb25nSW5kZXgoaXNtbikgewoJCQlyZXR1cm4gdGhpcy5zb25ncy5maW5kSW5kZXgoKHNvbmcpID0+IHNvbmcuaXNtbiA9PT0gaXNtbik7CgkJfQoJfQp9Owo="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/view","sourcesContent":["<template>\n\t<section class=\"section\">\n\t\t<div class=\"container is-fluid\">\n\t\t\t<div class=\"columns\">\n\t\t\t\t<AddSongForm @onAddSong=\"updateSongList\" class=\"column is-one-third\" />\n\t\t\t\t<SongList\n\t\t\t\t\t@onIssueSong=\"updateSongList\"\n\t\t\t\t\t@onReturnSong=\"updateSongList\"\n\t\t\t\t\t@onDeleteSong=\"updateSongList\"\n\t\t\t\t\tclass=\"column\"\n\t\t\t\t\t:songs=\"songs\"\n\t\t\t\t\t:song-count=\"songCount\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t</section>\n</template>\n\n<script>\nimport SongList from \"@/components/SongList\";\nimport AddSongForm from \"@/components/AddSongForm\";\nimport { utils } from \"@/mixins/utils\";\n\nexport default {\n\tcomponents: {\n\t\tSongList,\n\t\tAddSongForm\n\t},\n\n\tmixins: [utils],\n\n\tdata() {\n\t\treturn {\n\t\t\tsongs: [],\n\t\t\tsongCount: 0\n\t\t};\n\t},\n\n\tasync created() {\n\t\tawait Promise.all([this.getAllSongs(), this.getSongCount()]);\n\t},\n\n\tmethods: {\n\t\tasync getAllSongs() {\n\t\t\ttry {\n\t\t\t\tconst result = await this.$contract.getAllSongs();\n\n\t\t\t\tthis.songs = result.map((song) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttitle: song.title,\n\t\t\t\t\t\tauthor: song.author,\n\t\t\t\t\t\tcategory: song.category,\n\t\t\t\t\t\tismn: song.ismn,\n\t\t\t\t\t\tavailable: song.available\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t} catch (error) {\n\t\t\t\tthis.handle(error);\n\t\t\t}\n\t\t},\n\n\t\tasync getSongCount() {\n\t\t\tthis.songCount = await this.$contract.getSongCount();\n\t\t},\n\n\t\tupdateSongList(event) {\n\t\t\tswitch (event.name) {\n\t\t\t\tcase \"onAddSong\": {\n\t\t\t\t\tthis.songs.push(event.data);\n\t\t\t\t\tthis.songCount++;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"onIssueSong\": {\n\t\t\t\t\tconst songIdx = this.findSongIndex(event.data);\n\t\t\t\t\tthis.songs[songIdx].available = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"onReturnSong\": {\n\t\t\t\t\tconst songIdx = this.findSongIndex(event.data);\n\t\t\t\t\tthis.songs[songIdx].available = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"onDeleteSong\": {\n\t\t\t\t\tconst songIdx = this.findSongIndex(event.data);\n\t\t\t\t\tthis.songs.splice(songIdx, 1);\n\t\t\t\t\tthis.songCount--;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tfindSongIndex(ismn) {\n\t\t\treturn this.songs.findIndex((song) => song.ismn === ismn);\n\t\t}\n\t}\n};\n</script>\n"]}]}